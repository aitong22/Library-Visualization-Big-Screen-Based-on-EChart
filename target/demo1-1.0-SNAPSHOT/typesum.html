<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<script src="js/3rd/g2.min.js"></script>
<div id="chart-div"></div>
<script>
  const chart = new G2.Chart({
    container: 'chart-div',
    theme: 'classic',
    paddingLeft: 100,
  });
  fetch('/demo1_war_exploded/getData')
          .then(response => response.json())
          .then(data => {
            const formattedData = data.map(item => ({
              TYPENAME: item.type,
              sum: item.sum
            }));
            chart
                    .interval()
                    .data(formattedData)
                    .encode("x", "TYPENAME")
                    .encode("y", "sum")
                    .encode("color", "TYPENAME")
                    .axis("x", {
                      title: "Product Type",
                      titleSpacing: 30
                    })
                    .axis("y", {
                      title: "Total Order Amount",
                      titleSpacing: 30
                    })
                    .label({
                      text: "sum",
                      position: 'inside',
                      fill: '#fff'
                    });

            // 渲染图表
            chart.render();
          })
          .catch(error => console.error('Data loading error:', error));

</script>
<body>

</body>
</html>